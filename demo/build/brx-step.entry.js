import { r as registerInstance, f as createEvent, h, e as Host, g as getElement } from './index-1e49f12c.js';
import { T as TOKEN_UNCONTROLLED } from './tokens-3a672c03.js';
import { f as findTargets, e as enqueueIdleCallback } from './helpers-da43c71e.js';

const brxStepCss = "@charset \"UTF-8\";brx-step{display:block;--step-empty:16px;--step-empty-border:4px;--step-line:1px;--step-size:var(--step-medium);--step-small:32px;--step-medium:40px;--step-large:48px;--step-simple-size:var(--step-simple-medium);--step-simple-medium:8px;--step-simple-large:12px;--step-alert-success-icon:\"\";--step-alert-warning-icon:\"\";--step-alert-info-icon:\"\";--step-alert-danger-icon:\"\";display:flex}brx-step brx-step-progress{display:flex;flex-grow:1}brx-step brx-tooltip-auto,brx-step brx-tooltip-auto brx-tooltip,brx-step brx-tooltip-auto .brx-tooltip-auto-container{width:100%}brx-step[vertical]{flex-direction:column}brx-step[vertical] brx-step-progress{flex-direction:column}brx-step brx-step-progress-btn{flex-grow:1}brx-step brx-step-progress-btn button{align-items:center;background-color:transparent;border:0;display:flex;justify-content:center;min-height:var(--step-size);padding:0;position:relative;width:100%}brx-step[label-position=left] brx-step-progress-btn button{justify-content:end}brx-step[label-position=right] brx-step-progress-btn button{justify-content:start}brx-step[vertical] brx-step-progress-btn button{justify-content:start}brx-step[vertical][label-position=left] brx-step-progress-btn button{justify-content:end}brx-step[vertical][label-position=right] brx-step-progress-btn button{justify-content:start}brx-step brx-step-progress-btn button::before{align-items:center;background-color:var(--background);border:var(--step-line) solid var(--interactive);border-radius:50%;color:var(--interactive);content:attr(step-num);display:inline-flex;font-size:var(--font-size-scale-up-03);font-weight:var(--font-weight-medium);height:var(--step-size);justify-content:center;left:0;margin:auto;position:absolute;right:0;width:var(--step-size);z-index:2}brx-step .step-icon{align-items:center;color:var(--interactive);display:inline-flex;height:var(--step-size);justify-content:center;position:absolute;width:var(--step-size);z-index:4}brx-step .step-alert{align-items:center;border-radius:50%;color:var(--color-dark);display:flex;height:var(--font-size-scale-up-04);justify-content:center;position:absolute;width:var(--font-size-scale-up-04);z-index:4}brx-step .step-alert::after{display:flex;font-family:\"Font Awesome 5 Free\";font-size:var(--font-size-scale-up-01);font-weight:900}brx-step[label-position=bottom] brx-step-progress-btn button::before{top:0}brx-step[label-position=bottom] .step-icon{top:0}brx-step[label-position=bottom] .step-alert{transform:translate(calc(var(--step-size) * 0.5), calc(var(--step-size) * -0.75))}brx-step[label-position=top] brx-step-progress-btn button::before{bottom:0}brx-step[label-position=top] .step-icon{bottom:0}brx-step[label-position=top] .step-alert{transform:translate(calc(var(--step-size) * 0.5), calc(var(--step-size) * 0.25))}brx-step[label-position=left] brx-step-progress-btn button::before{left:auto;right:0}brx-step[label-position=left] .step-alert{transform:translate(calc(var(--step-size) * 0.4), calc(var(--step-size) * -0.25))}brx-step[label-position=right] brx-step-progress-btn button::before{left:0;right:auto}brx-step[label-position=right] .step-alert{transform:translate(calc(var(--step-size) * 0.65), calc(var(--step-size) * -0.25))}brx-step[vertical] brx-step-progress-btn button::before{bottom:0;left:auto;right:auto;top:0}brx-step[vertical][label-position=left] brx-step-progress-btn button::before{right:0}brx-step[vertical][label-position=right] brx-step-progress-btn button::before{left:0}brx-step brx-step-progress-btn button::after{background-color:var(--interactive);content:\"\";display:block;height:var(--step-line);left:0;position:absolute;right:0;z-index:1}brx-step brx-step-progress-btn:first-child button::after{left:50%}brx-step brx-step-progress-btn:last-child button::after{right:50%}brx-step[label-position=bottom] brx-step-progress-btn button::after{top:calc(var(--step-size) * 0.5)}brx-step[label-position=top] brx-step-progress-btn button::after{bottom:calc(var(--step-size) * 0.5)}brx-step[label-position=left] brx-step-progress-btn button::after{left:0}brx-step[label-position=left] brx-step-progress-btn:first-child button::after{left:100%}brx-step[label-position=left] brx-step-progress-btn:last-child button::after{right:0}brx-step[label-position=right] brx-step-progress-btn button::after{right:0}brx-step[label-position=right] brx-step-progress-btn:first-child button::after{left:0}brx-step[label-position=right] brx-step-progress-btn:last-child button::after{right:100%}brx-step[vertical] brx-step-progress-btn button::after{bottom:0;height:auto;left:auto;right:auto;top:0;width:var(--step-line)}brx-step[vertical] brx-step-progress-btn:first-child button::after{left:auto;top:50%}brx-step[vertical] brx-step-progress-btn:last-child button::after{bottom:50%;right:auto}brx-step[vertical][label-position=left] brx-step-progress-btn button::after{right:calc(var(--step-size) * 0.5)}brx-step[vertical][label-position=right] brx-step-progress-btn button::after{left:calc(var(--step-size) * 0.5)}brx-step .step-info{color:var(--interactive);display:inline-block;font-size:var(--font-size-scale-up-01);font-weight:var(--font-weight-medium)}brx-step[label-position=bottom] .step-info{margin-top:var(--step-size);padding-top:var(--spacing-scale-2x)}brx-step[label-position=top] .step-info{margin-bottom:var(--step-size);padding-bottom:var(--spacing-scale-2x)}brx-step[label-position=left] .step-info{display:none}@media (min-width: 576px){brx-step[label-position=left] .step-info{background-color:var(--background);display:inline-block;margin-right:var(--step-size);padding:var(--spacing-scale-2x);position:relative;z-index:3}}brx-step[label-position=right] .step-info{display:none}@media (min-width: 576px){brx-step[label-position=right] .step-info{background-color:var(--background);display:inline-block;margin-left:var(--step-size);padding:var(--spacing-scale-2x);position:relative;z-index:3}}brx-step[vertical][label-position=left] .step-info{display:inline-block;margin-left:0;margin-right:var(--step-size);padding:var(--spacing-scale-2x)}brx-step[vertical][label-position=right] .step-info{display:inline-block;margin-left:var(--step-size);margin-right:0;padding:var(--spacing-scale-2x)}brx-step[type=void] brx-step-progress-btn button::before{content:\"\";height:var(--step-empty);width:var(--step-empty)}brx-step[type=void] .step-info{height:0;overflow:hidden;position:absolute;width:0}brx-step[type=simple]{align-items:center;display:flex;justify-content:center}brx-step[type=simple] brx-step-progress{align-items:center;display:flex;justify-content:center}brx-step[type=simple] brx-step-progress-btn{flex-grow:0}brx-step[type=simple] brx-step-progress-btn button{width:24px}brx-step[type=simple] brx-step-progress-btn button::before{background-color:var(--gray-20);border-color:var(--gray-20);content:\"\";height:var(--step-simple-size);width:var(--step-simple-size)}brx-step[type=simple] brx-step-progress-btn button::after{content:none}brx-step[type=simple] .step-info{height:0;overflow:hidden;position:absolute;width:0}brx-step[type=text]{align-items:center;display:flex;justify-content:center}brx-step[type=text] brx-step-progress{align-items:stretch;display:flex;justify-content:center}brx-step[type=text] brx-step-progress-btn{position:absolute}brx-step[type=text] brx-step-progress-btn brx-tooltip-content{min-width:max-content}brx-step[type=text] brx-step-progress-btn button{height:0;min-height:var(--font-size-scale-base);overflow:hidden;width:0}brx-step[type=text] brx-step-progress-btn button::before{background-color:transparent;border:0;color:var(--color);font-size:var(--font-size-scale-base);font-weight:var(--font-weight-regular);width:auto}brx-step[type=text] brx-step-progress-btn button::after{content:none}brx-step[type=text] .step-info{height:0;overflow:hidden;position:absolute;width:0}brx-step[scroll],brx-step[data-scroll]{overflow-x:auto;overflow-y:hidden}brx-step[scroll]::-webkit-scrollbar,brx-step[data-scroll]::-webkit-scrollbar{height:var(--spacing-scale-base);width:var(--spacing-scale-base)}brx-step[scroll]::-webkit-scrollbar-track,brx-step[data-scroll]::-webkit-scrollbar-track{background:var(--gray-10)}brx-step[scroll]::-webkit-scrollbar-thumb,brx-step[data-scroll]::-webkit-scrollbar-thumb{background:var(--gray-30)}brx-step[scroll]:hover::-webkit-scrollbar-thumb,brx-step[data-scroll]:hover::-webkit-scrollbar-thumb{background:var(--gray-40)}brx-step[scroll] brx-step-progress-btn button,brx-step[data-scroll] brx-step-progress-btn button{min-width:200px}brx-step[scroll][vertical],brx-step[data-scroll][vertical]{overflow-x:hidden;overflow-y:auto}brx-step[scroll][vertical] brx-step-progress-btn button,brx-step[data-scroll][vertical] brx-step-progress-btn button{min-height:100px;min-width:auto}brx-step brx-step-progress-btn[alert=success] button{color:var(--success)}brx-step brx-step-progress-btn[alert=success] button .step-info{color:var(--success)}brx-step brx-step-progress-btn[alert=success] button .step-alert{background-color:var(--success)}brx-step brx-step-progress-btn[alert=success] button .step-alert::after{content:var(--step-alert-success-icon)}brx-step brx-step-progress-btn[alert=info] button{color:var(--info)}brx-step brx-step-progress-btn[alert=info] button .step-info{color:var(--info)}brx-step brx-step-progress-btn[alert=info] button .step-alert{background-color:var(--info)}brx-step brx-step-progress-btn[alert=info] button .step-alert::after{content:var(--step-alert-info-icon)}brx-step brx-step-progress-btn[alert=warning] button{color:var(--color-light)}brx-step brx-step-progress-btn[alert=warning] button .step-info{color:var(--color)}brx-step brx-step-progress-btn[alert=warning] button .step-alert{background-color:var(--warning)}brx-step brx-step-progress-btn[alert=warning] button .step-alert::after{content:var(--step-alert-warning-icon);color:var(--color-light)}brx-step brx-step-progress-btn[alert=danger] button{color:var(--danger)}brx-step brx-step-progress-btn[alert=danger] button .step-info{color:var(--danger)}brx-step brx-step-progress-btn[alert=danger] button .step-alert{background-color:var(--danger)}brx-step brx-step-progress-btn[alert=danger] button .step-alert::after{content:var(--step-alert-danger-icon)}brx-step brx-step-progress-btn.active button::before,brx-step brx-step-progress-btn[active] button::before{background-color:var(--active);border-color:var(--active);color:var(--background)}brx-step brx-step-progress-btn.active button .step-icon,brx-step brx-step-progress-btn[active] button .step-icon{color:var(--background)}brx-step brx-step-progress-btn button:focus{outline:none}brx-step brx-step-progress-btn button.focus-visible::before,brx-step brx-step-progress-btn button:focus-visible::before{outline-color:var(--focus);outline-offset:var(--focus-offset);outline-style:var(--focus-style);outline-width:var(--focus-width);z-index:4}brx-step brx-step-progress-btn button:hover:not(:disabled)::before{background-image:linear-gradient(rgba(var(--interactive-rgb), var(--hover)), rgba(var(--interactive-rgb), var(--hover)))}brx-step brx-step-progress-btn button:disabled{opacity:1}brx-step brx-step-progress-btn button:disabled::before{border-color:rgba(var(--interactive-rgb), var(--disabled))}brx-step brx-step-progress-btn button:disabled .step-icon{color:rgba(var(--interactive-rgb), var(--disabled))}brx-step[type=void] brx-step-progress-btn.active button .step-alert,brx-step[type=void] brx-step-progress-btn[active] button .step-alert{border:var(--step-empty-border) solid var(--active);height:calc(var(--font-size-scale-up-04) + var(--step-empty-border));width:calc(var(--font-size-scale-up-04) + var(--step-empty-border))}brx-step[type=void] brx-step-progress-btn[alert] button.focus-visible::before,brx-step[type=void] brx-step-progress-btn[alert] button:focus-visible::before{outline:none}brx-step[type=void] brx-step-progress-btn[alert] button.focus-visible .step-alert,brx-step[type=void] brx-step-progress-btn[alert] button:focus-visible .step-alert{outline-color:var(--focus);outline-offset:var(--focus-offset);outline-style:var(--focus-style);outline-width:var(--focus-width);z-index:4}brx-step[type=text] brx-step-progress-btn button{cursor:default}brx-step[type=text] brx-step-progress-btn.active,brx-step[type=text] brx-step-progress-btn[active]{width:auto;position:static}brx-step[type=text] brx-step-progress-btn.active button,brx-step[type=text] brx-step-progress-btn[active] button{height:auto;position:static;width:100%}brx-step[type=text] brx-step-progress-btn.active button::before,brx-step[type=text] brx-step-progress-btn[active] button::before{background-color:transparent;border:0;color:var(--color);position:static}brx-step[type=text] brx-step-progress-btn button:focus::before,brx-step[type=text] brx-step-progress-btn button.focus-visible::before,brx-step[type=text] brx-step-progress-btn button:focus-visible::before{outline:none}brx-step[type=text] brx-step-progress-btn button:hover::before{background-image:none}brx-step.inverted,brx-step.dark-mode,brx-step[dark-mode]{--color:var(--color-dark);--color-rgb:var(--color-dark-rgb);--text-color:var(--color);--interactive:var(--interactive-dark);--interactive-rgb:var(--interactive-dark-rgb);--visited:var(--visited-dark);--hover:var(--hover-dark);--pressed:var(--pressed-dark);--focus-color:var(--focus-color-dark);--focus:var(--focus-color)}brx-step.inverted brx-step-progress-btn.active button,brx-step.inverted brx-step-progress-btn[active] button,brx-step.dark-mode brx-step-progress-btn.active button,brx-step.dark-mode brx-step-progress-btn[active] button,brx-step[dark-mode] brx-step-progress-btn.active button,brx-step[dark-mode] brx-step-progress-btn[active] button{color:var(--color-dark)}brx-step.inverted brx-step-progress-btn.active button::before,brx-step.inverted brx-step-progress-btn[active] button::before,brx-step.dark-mode brx-step-progress-btn.active button::before,brx-step.dark-mode brx-step-progress-btn[active] button::before,brx-step[dark-mode] brx-step-progress-btn.active button::before,brx-step[dark-mode] brx-step-progress-btn[active] button::before{background-color:var(--background-light);border-color:var(--background-light);color:var(--active)}brx-step.inverted brx-step-progress-btn.active button .step-icon,brx-step.inverted brx-step-progress-btn[active] button .step-icon,brx-step.dark-mode brx-step-progress-btn.active button .step-icon,brx-step.dark-mode brx-step-progress-btn[active] button .step-icon,brx-step[dark-mode] brx-step-progress-btn.active button .step-icon,brx-step[dark-mode] brx-step-progress-btn[active] button .step-icon{color:var(--active)}brx-step.inverted brx-step-progress-btn[alert=success] button,brx-step.dark-mode brx-step-progress-btn[alert=success] button,brx-step[dark-mode] brx-step-progress-btn[alert=success] button{color:var(--success-alternative)}brx-step.inverted brx-step-progress-btn[alert=success] button .step-info,brx-step.dark-mode brx-step-progress-btn[alert=success] button .step-info,brx-step[dark-mode] brx-step-progress-btn[alert=success] button .step-info{color:var(--success-alternative)}brx-step.inverted brx-step-progress-btn[alert=success] button .step-alert::after,brx-step.dark-mode brx-step-progress-btn[alert=success] button .step-alert::after,brx-step[dark-mode] brx-step-progress-btn[alert=success] button .step-alert::after{content:var(--step-alert-success-icon)}brx-step.inverted brx-step-progress-btn[alert=info] button,brx-step.dark-mode brx-step-progress-btn[alert=info] button,brx-step[dark-mode] brx-step-progress-btn[alert=info] button{color:var(--info-alternative)}brx-step.inverted brx-step-progress-btn[alert=info] button .step-info,brx-step.dark-mode brx-step-progress-btn[alert=info] button .step-info,brx-step[dark-mode] brx-step-progress-btn[alert=info] button .step-info{color:var(--info-alternative)}brx-step.inverted brx-step-progress-btn[alert=info] button .step-alert::after,brx-step.dark-mode brx-step-progress-btn[alert=info] button .step-alert::after,brx-step[dark-mode] brx-step-progress-btn[alert=info] button .step-alert::after{content:var(--step-alert-info-icon)}brx-step.inverted brx-step-progress-btn[alert=warning] button .step-alert::after,brx-step.dark-mode brx-step-progress-btn[alert=warning] button .step-alert::after,brx-step[dark-mode] brx-step-progress-btn[alert=warning] button .step-alert::after{content:var(--step-alert-warning-icon)}brx-step.inverted brx-step-progress-btn[alert=danger] button,brx-step.dark-mode brx-step-progress-btn[alert=danger] button,brx-step[dark-mode] brx-step-progress-btn[alert=danger] button{color:var(--danger-alternative)}brx-step.inverted brx-step-progress-btn[alert=danger] button .step-info,brx-step.dark-mode brx-step-progress-btn[alert=danger] button .step-info,brx-step[dark-mode] brx-step-progress-btn[alert=danger] button .step-info{color:var(--danger-alternative)}brx-step.inverted brx-step-progress-btn[alert=danger] button .step-alert::after,brx-step.dark-mode brx-step-progress-btn[alert=danger] button .step-alert::after,brx-step[dark-mode] brx-step-progress-btn[alert=danger] button .step-alert::after{content:var(--step-alert-danger-icon)}brx-step.inverted[type=void] brx-step-progress-btn.active button .step-alert,brx-step.inverted[type=void] brx-step-progress-btn[active] button .step-alert,brx-step.dark-mode[type=void] brx-step-progress-btn.active button .step-alert,brx-step.dark-mode[type=void] brx-step-progress-btn[active] button .step-alert,brx-step[dark-mode][type=void] brx-step-progress-btn.active button .step-alert,brx-step[dark-mode][type=void] brx-step-progress-btn[active] button .step-alert{border-color:var(--color-dark)}brx-step.inverted[type=text] brx-step-progress-btn button::before,brx-step.dark-mode[type=text] brx-step-progress-btn button::before,brx-step[dark-mode][type=text] brx-step-progress-btn button::before{background-color:transparent;color:var(--color)}";

const DOMstrings = {
  step: 'brx-step',
  progress: 'brx-step-progress',
  progressButton: 'brx-step-progress-btn',
  progressButtonTrigger: 'brx-step-progress-btn button',
};
const BrxStep = class {
  constructor(hostRef) {
    registerInstance(this, hostRef);
    this.brxStepChange = createEvent(this, "brxStepChange", 7);
    this.type = undefined;
    this.value = undefined;
    this.controlledValue = TOKEN_UNCONTROLLED;
    this.currentValue = undefined;
  }
  get progressItems() {
    return findTargets(DOMstrings.progressButton, this.el, ['child']);
  }
  get currentFocusedIndex() {
    return Math.max(this.progressItems.findIndex(i => i.contains(document.activeElement)), 0);
  }
  syncCurrentValueFromProps() {
    const targetValue = this.controlledValue !== TOKEN_UNCONTROLLED ? this.controlledValue : this.value;
    this.currentValue = targetValue !== null && targetValue !== void 0 ? targetValue : 0;
  }
  setCurrentValue(value) {
    if (this.controlledValue === TOKEN_UNCONTROLLED) {
      this.currentValue = value;
    }
    this.brxStepChange.emit({ value });
    return Promise.resolve();
  }
  openStep(stepIndex) {
    const { progressItems: progressButtons } = this;
    for (const [index, button] of progressButtons.entries()) {
      const active = index === stepIndex;
      button.setActive(active);
    }
  }
  syncSteps() {
    this.openStep(this.currentValue);
  }
  renderStepsContent() {
    const { progressItems: progressButtons } = this;
    for (const [index, element] of progressButtons.entries()) {
      const isTypeText = this.type === 'text';
      const isTypeImg = element.querySelector('.step-icon');
      const stepNum = isTypeText ? `${index + 1}/${progressButtons.length}` : isTypeImg ? '' : `${index + 1}`;
      element.setAttribute('step-num', stepNum);
    }
  }
  get focusedTabItemIndex() {
    return this.progressItems.findIndex(i => i.contains(document.activeElement));
  }
  handleProgressButtonClick(event) {
    const target = event.target;
    const trigger = target.closest(DOMstrings.progressButtonTrigger);
    if (trigger) {
      const button = trigger.closest(DOMstrings.progressButton);
      const disabled = (trigger === null || trigger === void 0 ? void 0 : trigger.disabled) || button.disabled;
      if (!disabled) {
        const targetIndex = this.progressItems.indexOf(button);
        this.setCurrentValue(targetIndex);
        enqueueIdleCallback(() => {
          trigger.focus();
        });
      }
    }
  }
  componentWillLoad() {
    this.syncCurrentValueFromProps();
  }
  connectedCallback() {
    enqueueIdleCallback(() => {
      this.renderStepsContent();
    });
  }
  render() {
    return (h(Host, null, h("slot", null)));
  }
  get el() { return getElement(this); }
  static get watchers() { return {
    "value": ["syncCurrentValueFromProps"],
    "controlledValue": ["syncCurrentValueFromProps"],
    "currentValue": ["syncSteps"],
    "type": ["renderStepsContent"]
  }; }
};
BrxStep.style = brxStepCss;

export { BrxStep as brx_step };
