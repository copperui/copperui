var __awaiter=this&&this.__awaiter||function(t,e,a,n){function r(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,i){function o(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):r(t.value).then(o,s)}l((n=n.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return l([t,e])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=o[0]&2?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;if(r=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:false};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){a=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(o[0]===6&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}if(i[2])a.ops.pop();a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t];r=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e,a){if(a||arguments.length===2)for(var n=0,r=e.length,i;n<r;n++){if(i||!(n in e)){if(!i)i=Array.prototype.slice.call(e,0,n);i[n]=e[n]}}return t.concat(i||Array.prototype.slice.call(e))};System.register(["./p-ff939259.system.js","./p-aec0cddf.system.js","./p-9f404eb1.system.js","./p-6ca76c87.system.js"],(function(t){"use strict";var e,a,n,r,i,o,s,l,u,d,c,p,b;return{setters:[function(t){e=t.r;a=t.c;n=t.h;r=t.F;i=t.a;o=t.g},function(t){s=t.C},function(t){l=t.g;u=t.h;d=t.i;c=t.p;p=t.w},function(t){b=t.i}],execute:function(){var f="brx-upload{display:block}brx-upload brx-loading{display:block;width:100%}brx-upload input{display:none}brx-upload .upload-button{--button-radius:100em;--button-xsmall:24px;--button-small:32px;--button-medium:40px;--button-large:48px;--button-size:var(--button-medium)}brx-upload .upload-button .brx-button-native{-ms-flex-align:center;align-items:center;background-color:transparent;border:0;border-radius:var(--button-radius);color:var(--interactive);cursor:pointer;display:-ms-inline-flexbox;display:inline-flex;font-size:var(--font-size-scale-up-01);font-weight:var(--font-weight-semi-bold);height:var(--button-size);-ms-flex-pack:center;justify-content:center;overflow:hidden;padding:0 var(--spacing-scale-3x);position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}brx-upload .upload-button .brx-button-native{border:var(--surface-width-sm) dashed var(--interactive);border-radius:var(--surface-rounder-sm);display:block;font-size:var(--font-size-scale-base);font-style:italic;font-weight:var(--font-weight-regular);margin-top:var(--spacing-scale-half);max-width:550px;min-height:var(--button-size);padding-left:var(--spacing-scale-2x);padding-right:var(--spacing-scale-2x);text-align:left;width:100%}brx-upload .upload-button .brx-button-native .svg-inline--fa,brx-upload .upload-button .brx-button-native .fa,brx-upload .upload-button .brx-button-native .fab,brx-upload .upload-button .brx-button-native .fad,brx-upload .upload-button .brx-button-native .fal,brx-upload .upload-button .brx-button-native .far,brx-upload .upload-button .brx-button-native .fas{margin-right:var(--spacing-scale-base)}brx-upload .upload-list{max-width:550px;position:relative}brx-upload .upload-list brx-tooltip{overflow:hidden;max-width:100%;display:-ms-flexbox;display:flex;-ms-flex:1 1;flex:1 1;padding-right:1rem}brx-upload .upload-list brx-tooltip .content{max-width:100%;overflow:hidden}brx-upload .upload-list brx-tooltip .content span{display:block;-ms-flex-item-align:center;align-self:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}brx-upload .upload-list .support{-ms-flex:0 1;flex:0 1;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;white-space:nowrap}brx-upload brx-tooltip-content{max-width:93%}brx-upload .upload-button:disabled .brx-button-native,brx-upload .upload-button[disabled] .brx-button-native{cursor:not-allowed}brx-upload .upload-button:not(:disabled):not([disabled]) .brx-button-native{--focus-offset:var(--spacing-scale-half)}brx-upload .upload-button:not(:disabled):not([disabled]) .brx-button-native:focus{outline:none}brx-upload .upload-button:not(:disabled):not([disabled]) .brx-button-native.focus-visible,brx-upload .upload-button:not(:disabled):not([disabled]) .brx-button-native:focus-visible{outline-color:var(--focus);outline-offset:var(--focus-offset);outline-style:var(--focus-style);outline-width:var(--focus-width)}brx-upload .upload-button:not(:disabled):not([disabled]) .brx-button-native:not([data-disable-hover-interaction]):not(:disabled):hover{background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(var(--interactive-rgb), var(--hover))), to(rgba(var(--interactive-rgb), var(--hover))));background-image:linear-gradient(rgba(var(--interactive-rgb), var(--hover)), rgba(var(--interactive-rgb), var(--hover)))}brx-upload .upload-button:not(:disabled):not([disabled]) .brx-button-native:not(:disabled):active{background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(var(--interactive-rgb), var(--pressed))), to(rgba(var(--interactive-rgb), var(--pressed))));background-image:linear-gradient(rgba(var(--interactive-rgb), var(--pressed)), rgba(var(--interactive-rgb), var(--pressed)))}brx-upload .upload-button[active] .brx-button-native{--hover:var(--hover-dark);background-color:var(--active);color:var(--color-dark)}brx-upload .upload-button brx-loading{width:auto;height:auto}brx-upload .upload-button brx-loading::after{margin:0;border-color:var(--interactive) var(--interactive) transparent;border-style:solid}brx-upload .upload-button[variant=primary] brx-loading::after,brx-upload .upload-button[color=success] brx-loading::after,brx-upload .upload-button[color=danger] brx-loading::after,brx-upload .upload-button[color=info] brx-loading::after{border-color:var(--background) var(--background) transparent}brx-upload[status=success] .upload-button .brx-button-native{border-color:var(--success)}brx-upload[status=danger] .upload-button .brx-button-native{border-color:var(--danger)}brx-upload[status=warning] .upload-button .brx-button-native{border-color:var(--warning)}brx-upload[status=info] .upload-button .brx-button-native{border-color:var(--info)}brx-upload.dragging .upload-button .brx-button-native{background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(var(--interactive-rgb), var(--hover))), to(rgba(var(--interactive-rgb), var(--hover))));background-image:linear-gradient(rgba(var(--interactive-rgb), var(--hover)), rgba(var(--interactive-rgb), var(--hover)))}";var h=undefined&&undefined.__classPrivateFieldSet||function(t,e,a,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e==="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,a):r?r.value=a:e.set(t,a),a};var v=undefined&&undefined.__classPrivateFieldGet||function(t,e,a,n){if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e==="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?n:a==="a"?n.call(t):n?n.value:e.get(t)};var g,m;var x=["dragenter","dragover"];var y=["dragleave","drop"];var w=["dragenter","dragover","dragleave","drop"];var A={inputNative:"input",fileList:".upload-list",buttonContainer:".upload-button",buttonNative:".upload-button button"};var k=function(){return p(0)};var F=t("brx_upload",function(){function t(t){e(this,t);this.brxChange=a(this,"brxChange",7);g.set(this,new s);this.updateFileListInProgress=false;m.set(this,void 0);this.multiple=false;this.disabled=false;this.value=null;this.handleUploadFiles=k;this.attachmentAssets=[];this.status=undefined;this.label=undefined;this.messages=[];this.hasFocus=false;this.accept=undefined;this.autofocus=false;this.name=undefined;this.readonly=false;this.required=false;this.spellcheck=false;this.step=undefined;this.size=undefined;this.hiddenLabel=undefined;this.labelClass=undefined;this.inputId=undefined}Object.defineProperty(t.prototype,"buttonEl",{get:function(){var t;return(t=v(this,m,"f"))!==null&&t!==void 0?t:this.el.querySelector(A.buttonNative)},set:function(t){var e=this.buttonEl;h(this,m,t,"f");if(t!==e){this.setDragAndDropBehavior()}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"textHelpEl",{get:function(){return document.querySelector(".text-base")},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"inputEl",{get:function(){return this.el.querySelector(A.inputNative)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"uploadListEl",{get:function(){return this.el.querySelector(A.fileList)},enumerable:false,configurable:true});t.prototype.getAttachmentAssets=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.attachmentAssets]}))}))};t.prototype.setAttachmentAssets=function(t){if(this.value===null){this.attachmentAssets=t}this.brxChange.emit({attachmentAssets:t})};t.prototype.handleValueChange=function(){var t=this.value;if(t!==null){this.attachmentAssets=t}};t.prototype.handleAttachmentAssetsChange=function(){var t=this,e=t.multiple,a=t.attachmentAssets,n=t.inputEl;if(e){n.files=this.getFileList()}else if(a.length===0){n.value=""}this.updateFileList()};t.prototype.clickUpload=function(){this.inputEl.click()};t.prototype.handleFiles=function(t){var e=this.multiple;this.messages=[];var a=t.length===0?Array.from(this.inputEl.files):Array.from(t);if(!e&&a.length>1){this.addFeedback("danger","É permitido o envio de somente 1 arquivo.")}else if(!e&&this.attachmentAssets.length>0){this.changeFiles(a);this.addFeedback("warning","O arquivo enviado anteriormente foi substituído.")}else{this.addFiles(a)}};t.prototype.hightLight=function(){this.el.classList.add("dragging")};t.prototype.unHightLight=function(){this.el.classList.remove("dragging")};t.prototype.handleDrop=function(t){this.unHightLight();var e=t.dataTransfer.files;this.handleFiles(e)};t.prototype.setDragAndDropBehavior=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,a,n,r,i,o,s,l,u,d,p,o,b,f,h,m,A,o,k;var F=this;return __generator(this,(function(_){switch(_.label){case 0:t=this.buttonEl;if(!t){return[2]}return[4,v(this,g,"f").run()];case 1:_.sent();{e=function(t){c(t)};a=function(a){t.addEventListener(a,e);v(n,g,"f").add((function(){t.removeEventListener(a,e)}))};n=this;for(r=0,i=w;r<i.length;r++){o=i[r];a(o)}}{s=function(){F.hightLight()};l=function(e){t.addEventListener(e,s);v(u,g,"f").add((function(){t.removeEventListener(e,s)}))};u=this;for(d=0,p=x;d<p.length;d++){o=p[d];l(o)}}{b=function(){F.unHightLight()};f=function(e){t.addEventListener(e,b);v(h,g,"f").add((function(){t.removeEventListener(e,b)}))};h=this;for(m=0,A=y;m<A.length;m++){o=A[m];f(o)}}{k=function(t){F.handleDrop(t)};t.addEventListener("drop",k);v(this,g,"f").add((function(){t.removeEventListener("drop",k)}))}return[2]}}))}))};t.prototype.addMessage=function(t){this.messages=__spreadArray(__spreadArray([],this.messages,true),[t],false)};t.prototype.addFeedback=function(t,e){var a={text:e,severity:t,variant:"feedback",id:"".concat(l())};this.addMessage(a);this.status=t};t.prototype.changeFiles=function(t){var e=t.map((function(t){return t instanceof Blob?{file:t,id:l()}:t}));this.setAttachmentAssets(e)};t.prototype.addFiles=function(t){this.changeFiles(__spreadArray(__spreadArray([],this.attachmentAssets,true),t,true))};t.prototype.updateAsset=function(t,e){this.changeFiles(this.attachmentAssets.map((function(a){return a.id===t?e(a):a})))};t.prototype.updateFileList=function(){if(this.updateFileListInProgress){return}this.updateFileListInProgress=true;this.status=undefined;if(this.el.nextElementSibling===this.textHelpEl){this.textHelpEl.style.display="none"}if(!this.attachmentAssets.length){this.messages=[];if(this.el.nextElementSibling===this.textHelpEl){this.textHelpEl.style.display=""}}else{this.messages=[];for(var t=0;t<this.attachmentAssets.length;t++){if("nowait"in this.attachmentAssets[t]){if(this.attachmentAssets[t].nowait){this.renderItem(t)}}else if(!this.attachmentAssets[t].requested){this.uploadingFile(t)}}}this.updateFileListInProgress=false};t.prototype.uploadingFile=function(t){var e=this;var a=this.getAssetIdByIndex(t);var n=this.getAssetById(a);if(this.handleUploadFiles){this.updateAsset(a,(function(t){return Object.assign(Object.assign({},t),{requested:true})}));this.handleUploadFiles(n,t).then((function(){e.updateAsset(a,(function(t){return Object.assign(Object.assign({},t),{nowait:true})}))}))}};t.prototype.renderItem=function(t){var e=this.getAssetIdByIndex(t);this.updateAsset(e,(function(t){return Object.assign(Object.assign({},t),{nowait:true})}))};t.prototype.getAssetIdByIndex=function(t){var e;var a=this.attachmentAssets[t];return(e=a===null||a===void 0?void 0:a.id)!==null&&e!==void 0?e:null};t.prototype.getAssetById=function(t){return this.attachmentAssets.find((function(e){return e.id===t}))};t.prototype.removeFileByIndex=function(t){var e=this.getAssetIdByIndex(t);this.removeFileById(e)};t.prototype.removeFileById=function(t){if(!t){return}this.status=undefined;this.messages=[];this.changeFiles(this.attachmentAssets.filter((function(e){return e.id!==t})))};t.prototype.handleUploadButtonClick=function(t){var e=t.target;var a=e.closest(A.buttonNative);if(a){this.clickUpload()}};t.prototype.handleInputChange=function(t){var e=t.target;var a=e.closest(A.inputNative);if(a){this.handleFiles(a.files)}};t.prototype.getFileList=function(){return u(this.attachmentAssets.map((function(t){return t.file})))};t.prototype.componentWillLoad=function(){if(!this.inputId){this.inputId=l()}};t.prototype.componentShouldUpdate=function(t,e,a){switch(a){case"buttonEl":{return false}default:{return true}}};Object.defineProperty(t.prototype,"inheritedAttributes",{get:function(){return b(this.el)},enumerable:false,configurable:true});t.prototype.render=function(){var t=this;var e=this,a=e.hiddenLabel,o=e.labelClass,s=e.attachmentAssets,l=e.messages,u=e.disabled,p=e.multiple,b=e.label,f=e.inputId,h=e.inheritedAttributes;var v="".concat(f,"-lbl");return n(i,null,n("label",{class:"upload-label ".concat(a?"sr-only":""," ").concat(o),id:v,htmlFor:f},b),n("input",Object.assign({class:"upload-input",id:f,type:"file",multiple:p,disabled:u,"aria-labelledby":v,accept:this.accept,autoFocus:this.autofocus,name:this.name,readOnly:this.readonly,required:this.required,step:this.step,size:this.size,tabindex:this.tabindex,spellcheck:this.spellcheck?"true":undefined},h)),n("div",{class:"upload-button"},n("button",{type:"button",class:"brx-button-native",ref:function(e){t.buttonEl=e}},n("brx-icon",{name:"fa5/fas/upload"}),n("span",null,p?"Selecione o(s) arquivo(s).":"Selecione o arquivo."))),l.map((function(t){return n("brx-message",{key:t.id,variant:t.variant,severity:t.severity,class:"mt-1"},t.text)})),n("div",{class:"upload-list"},s.map((function(e){var a=e.id,i=e.file,o=e.requested,s=e.nowait;var l=o&&!s;return n("brx-item",{key:a,class:"d-flex"},!l&&n(r,null,n("brx-tooltip",{class:"mr-auto",place:"top",color:"info",text:i.name},n("div",{class:"content text-primary-default "},n("span",null,i.name))),n("div",{class:"name"}),n("div",{class:"support mr-n2"},n("span",{class:"mr-1"},d(i.size)),n("brx-button",{circle:true,type:"button",onClick:function(e){c(e);t.removeFileById(a)}},n("brx-icon",{name:"fa5/fas/trash"})))),l&&n("brx-loading",{class:"d-flex mt-1",size:"small"}))}))),n("slot",null))};Object.defineProperty(t.prototype,"el",{get:function(){return o(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{value:["handleValueChange"],attachmentAssets:["handleAttachmentAssetsChange"]}},enumerable:false,configurable:true});return t}());g=new WeakMap,m=new WeakMap;F.style=f}}}));